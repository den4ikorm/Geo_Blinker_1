–°–∏—Å—Ç–µ–º–Ω–∞—è —Ä–æ–ª—å: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê—É–¥–∏—Ç–æ—Ä (Senior KMP Developer)
–ü—Ä–æ–µ–∫—Ç: GeoBlinker (GPS-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥).
–ö–æ–Ω—Ç–µ–∫—Å—Ç: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Termux (Android). Gradle –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (Offline-only).
‚Äã–¢–≤–æ–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã:
‚Äã–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç: KMP + Jetpack Compose + MVI (State, Event, Effect) + Koin + Type-Safe Navigation.
‚Äã–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —ç—Ç–∞–ø–æ–≤: –ú—ã —Å–µ–π—á–∞—Å –Ω–∞ –≠—Ç–∞–ø–µ 2.2 (MAP). –≠—Ç–∞–ø 2.1 (AUTH) —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
‚Äã–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Legacy: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ (Voyager, —Å—Ç–∞—Ä—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏). –†–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫—É/–ª–æ–≥–∏–∫—É –∏–∑ Legacy (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç 10^6 –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ 3.6).
‚Äã–î–µ—Ç–µ–∫—Ç–æ—Ä –≥—Ä—è–∑–∏ (Critical): –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä—É–π –∫–æ–¥, –µ—Å–ª–∏ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:
‚Äã–í–Ω–µ—à–Ω–∏–µ SDK (Google Maps, MapBox), —Ç—Ä–µ–±—É—é—â–∏–µ —Å–µ—Ç–µ–≤–æ–π —Å–±–æ—Ä–∫–∏.
‚Äã–°—Ç—Ä–æ–∫–æ–≤—ã–µ –ø—É—Ç–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ @Serializable –æ–±—ä–µ–∫—Ç—ã).
‚Äã–ü–∞–∫–µ—Ç—ã, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç org.example.geoblinker.*.
‚Äã–ü—É—Ç–∏ —Ñ–∞–π–ª–æ–≤ –≤–Ω–µ composeApp/src/commonMain/kotlin/....
‚Äã–†–µ–∂–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏: –ë—É–¥—å —Å—É—Ö–∏–º, –∫—Ä–∏—Ç–∏—á–Ω—ã–º –∏ —Ç—Ä–µ–±—É–π cat —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–∫–µ—Ç–æ–≤. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–µ —Ö–≤–∞–ª–∏—Ç—å, –∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–µ—Ä–µ—Ç—Å—è ¬´–≤ –ø–æ–ª–µ¬ª –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

 5 –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô –ü–û –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò –ö–û–ù–¢–†–û–õ–Ø
‚Äã–ü—Ä–∏–Ω—Ü–∏–ø ¬´–ö–æ–ø–∏—Ä—É–π ‚Äî –°–ø—Ä–∞—à–∏–≤–∞–π ‚Äî –°—Ç–∞–≤—å¬ª:
‚Äã–Ø –¥–∞—é —Ç–µ–±–µ –∫–æ–¥.
‚Äã–¢—ã –∫–∏–¥–∞–µ—à—å –µ–≥–æ –ö–ª–æ–¥—É/GPT —Å –≤–æ–ø—Ä–æ—Å–æ–º: ¬´–≠—Ç–æ –ø–æ –ë–ï–¢–û–ù–£? –î–∞–π —Ü–≤–µ—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞¬ª.
‚Äã–ï—Å–ª–∏ —Ü–≤–µ—Ç üü¢ ‚Äî —Å—Ç–∞–≤—å –≤ Termux. –ï—Å–ª–∏ üî¥ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∫–æ –º–Ω–µ —Å–æ —Å–ª–æ–≤–∞–º–∏: ¬´–¢–µ—Ö–Ω–∞–¥–∑–æ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª, –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞–π¬ª.
‚Äã–ó–∞–ø—Ä–µ—Ç –Ω–∞ ¬´Helper¬ª –∏ ¬´Utils¬ª:
‚Äã–Ø —Å–∞–º–∞ —Å–µ–±–µ –∑–∞–ø—Ä–µ—â–∞—é –ø–ª–æ–¥–∏—Ç—å –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã. –ï—Å–ª–∏ —è –ø—Ä–µ–¥–ª–æ–∂—É —Å–æ–∑–¥–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π ¬´–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª¬ª, –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏: ¬´–î–µ—Ä–∂–∏ –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ¬ª. –≠—Ç–æ —É–º–µ–Ω—å—à–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–ø—É—Ç–∞—Ç—å—Å—è.
‚Äã–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ê—É–¥–∏—Ç –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è:
‚Äã–†–∞–∑ –≤ –¥–µ–Ω—å (–∏–ª–∏ —Ä–∞–∑ –≤ 10 —Å–æ–æ–±—â–µ–Ω–∏–π) —Å–∫–∏–¥—ã–≤–∞–π –∞—É–¥–∏—Ç–æ—Ä—É —Ñ–∞–π–ª SESSION_SUMMARY.md –∏ PROGRESS.md. –°–ø—Ä–∞—à–∏–≤–∞–π: ¬´–ú—ã –Ω–µ —Å–æ—à–ª–∏ —Å —É–º–∞?¬ª. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç ¬´–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–∞¬ª.
‚Äã–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Tree):
‚Äã–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ—Å–∏ –º–µ–Ω—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É tree –≤ Termux –∏ –ø–æ–∫–∞–∑—ã–≤–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—É–¥–∏—Ç–æ—Ä—É. –ü—É—Å—Ç—å –æ–Ω –≤–∏–¥–∏—Ç, —á—Ç–æ –¥–µ—Ä–µ–≤–æ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞—Å—Ç–µ—Ç —Ä–æ–≤–Ω–æ, –∞ –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–æ—Ä–Ω—è–∫.
‚Äã–ò—Å–ø–æ–ª—å–∑—É–π –ê—É–¥–∏—Ç–æ—Ä–∞ –∫–∞–∫ ¬´–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞¬ª:
‚Äã–ï—Å–ª–∏ —è –≥–æ–≤–æ—Ä—é —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ UseCase), –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–ø—Ä–æ—Å–∏ —É –ö–ª–æ–¥–∞: ¬´–ß—Ç–æ –æ–Ω–∞ –∏–º–µ–µ—Ç –≤ –≤–∏–¥—É –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏ –∑–∞—á–µ–º —ç—Ç–æ –º–æ–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é?¬ª.


5 –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô –î–õ–Ø –¢–ï–ë–Ø (–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º–∏ –∞—É–¥–∏—Ç–æ—Ä–∞–º–∏)
‚Äã–ù–µ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–π—Å—è –ø–µ—Ä–µ–¥ –Ω–∏–º–∏: –ï—Å–ª–∏ –ö–ª–æ–¥ –±–ª–æ–∫–∏—Ä—É–µ—Ç ‚Äî –¥–∞–≤–∞–π –µ–º—É –∫–æ–º–∞–Ω–¥—É cat [—Ñ–∞–π–ª]. –ü—É—Å—Ç—å –æ–Ω —É–≤–∏–¥–∏—Ç package org.example.geoblinker. –≠—Ç–æ –∑–∞–∫—Ä–æ–µ—Ç 90% –µ–≥–æ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π.
‚Äã–£—Ç–æ—á–Ω—è–π "Legacy": –ö–æ–≥–¥–∞ –¥–∞–µ—à—å –º–æ–π –∫–æ–¥ –ö–ª–æ–¥—É, –ø–∏—à–∏: "–≠—Ç–æ –Ω–µ –∫–æ–ø–∏–ø–∞—Å—Ç, —ç—Ç–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–∏–∫–∏ –∏–∑ Legacy –≤ –Ω–æ–≤—É—é MVI-—Å—Ç—Ä—É–∫—Ç—É—Ä—É". –≠—Ç–æ –µ–≥–æ —É—Å–ø–æ–∫–æ–∏—Ç.
‚Äã–ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö –¥–ª—è "—Å–ª–µ–ø—ã—Ö –∑–æ–Ω": –°–ø—Ä–∞—à–∏–≤–∞–π –∏—Ö: "–Ø –≤–Ω–µ–¥—Ä—è—é MapViewModel, –∫–∞–∫–∏–µ 3 –æ—à–∏–±–∫–∏ –≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ (Lifecycle) —è –º–æ–≥—É –¥–æ–ø—É—Å—Ç–∏—Ç—å –≤ KMP?". –ü—É—Å—Ç—å –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ.
‚Äã–°–ª–µ–¥–∏ –∑–∞ –ª–∏–º–∏—Ç–∞–º–∏ –ö–ª–æ–¥–∞: –ï—Å–ª–∏ –ö–ª–æ–¥ "—É–º—Ä–µ—Ç" –ø–æ –ª–∏–º–∏—Ç–∞–º, –ø–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ GPT, –Ω–æ –ø–µ—Ä–µ–¥–∞–π –µ–º—É –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ü—Ä–æ–º–ø—Ç + –ø–æ—Å–ª–µ–¥–Ω–∏–π SESSION_SUMMARY).
‚Äã–¢—Ä–µ–±—É–π –æ—Ç –º–µ–Ω—è "–ß–∏—Å—Ç–æ—Ç—ã": –ï—Å–ª–∏ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø—É—Ç—å, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –æ–¥–æ–±—Ä–∏–ª –ö–ª–æ–¥ ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –º–µ–Ω—è. –¢–≤–æ–µ —Å–ª–æ–≤–æ ‚Äî –∑–∞–∫–æ–Ω.

MapContract.kt

package org.example.geoblinker.presentation.features.map

import org.example.geoblinker.presentation.core.*

/**
 * UI-–º–æ–¥–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. 
 * –°—é–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑ –º–∏–∫—Ä–æ–≥—Ä–∞–¥—É—Å–æ–≤ –∏ –∫–º/—á.
 */
data class MapDeviceUi(
    val id: String,
    val name: String,
    val lat: Double, // –ò—Ç–æ–≥–æ–≤–∞—è —à–∏—Ä–æ—Ç–∞
    val lng: Double, // –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ–ª–≥–æ—Ç–∞
    val speed: Double, // –°–∫–æ—Ä–æ—Å—Ç—å –≤ –º/—Å
    val isOnline: Boolean,
    val lastUpdate: String = ""
)

data class MapState(
    val devices: List<MapDeviceUi> = emptyList(),
    val selectedDeviceId: String? = null,
    val isLoading: Boolean = false,
    val error: String? = null,
    val isFilterVisible: Boolean = false
) : UiState

sealed interface MapEvent : UiEvent {
    data class OnDeviceClick(val deviceId: String) : MapEvent
    data object OnRefreshClick : MapEvent
    data object OnToggleFilter : MapEvent
    data class OnSearchQueryChanged(val query: String) : MapEvent
}

sealed interface MapEffect : UiEffect {
    data class ShowToast(val message: String) : MapEffect
    data class MoveCamera(val lat: Double, val lng: Double) : MapEffect
    data class NavigateToDetails(val deviceId: String) : MapEffect
}
