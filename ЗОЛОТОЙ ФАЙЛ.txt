// --- СЛОЙ ДАННЫХ (Contract) ---
data class DeviceUi(
    val id: String,
    val title: String,        // ViewModel подготовила имя
    val speedValue: String,   // ViewModel сделала "15.0 м/с"
    val statusColor: Long,    // ViewModel дала HEX-код цвета
    val statusText: String    // ViewModel дала текст "В сети"
)

// --- СЛОЙ ЛОГИКИ (ViewModel) ---
class DeviceViewModel(private val converter: LegacyConverter) : BaseViewModel() {
    private fun mapToUi(raw: RawData) = DeviceUi(
        id = raw.id,
        title = "Объект: ${raw.name}",
        speedValue = converter.formatSpeed(raw.speed), // ВСЯ МАТЕМАТИКА ТУТ
        statusColor = if (raw.isOnline) 0xFF4CAF50 else 0xFF808080, // ЦВЕТ ТУТ
        statusText = if (raw.isOnline) "ОНЛАЙН" else "ОФФЛАЙН" // ТЕКСТ ТУТ
    )
}

// --- СЛОЙ UI (Screen) — ТОТ САМЫЙ THIN UI ---
@Composable
fun DeviceScreen(state: DeviceState) {
    // ВАЖНО: Ни одного if, ни одного "%.1f", ни одного Color.Green
    Column {
        Text(text = state.device.title)
        Text(text = state.device.speedValue)
        Text(
            text = state.device.statusText, 
            color = Color(state.device.statusColor) // Просто берем готовое
        )
    }
}